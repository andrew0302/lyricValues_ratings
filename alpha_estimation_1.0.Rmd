---
title: "alpha_estimation_1.0"
author: "andrew demetriou"
date: "11/25/2021"
---


```{r setup, include=FALSE}
library('data.table') # data manipulation
library('here')       # file logistics
library('Hmisc')      # visualization
library('stringr')    # manipulating strings
```

```{r}
# path with the actual data
data_file_path <- here("data")

# create a list with all of the files
data_files <- list.files(data_file_path)

# read in qualtrics data file
responses_dt <- fread(here(data_file_path, "annotation_number_estimation _2.2_November 28, 2021_07.51.csv"))

# remove junk on first two rows
responses_dt <- responses_dt[3:.N][`Participant Consent`=='agree', ]
```

```{r}
# logical vector indicating: 
# 1) value ratings of songs
# 2) participant ID
songs <- grepl("-1_|PROLIFIC_PID", colnames(responses_dt)) 

# keep only columns in logical vector
songs_dt <- responses_dt[, ..songs]
```

```{r}
t <- as.data.frame(melt(songs_dt, id.var="PROLIFIC_PID"))

pattern <- paste0("-1_", seq(1, 10, 1))
songs <- as.character(t$variable)

songs <- gsub(pattern[10], "", songs)
songs <- gsub(pattern[9], "", songs)
songs <- gsub(pattern[8], "", songs) 
songs <- gsub(pattern[7], "", songs) 
songs <- gsub(pattern[6], "", songs) 
songs <- gsub(pattern[5], "", songs) 
songs <- gsub(pattern[4], "", songs) 
songs <- gsub(pattern[3], "", songs) 
songs <- gsub(pattern[2], "", songs) 
songs <- gsub(pattern[1], "", songs) 

t$song <- songs
```

```{r}
t$rating <- t$value
t$variable <- as.character(t$variable)
songs <- unique(t$song)

#variable <- t$variable

for(i in 1:length(songs)) {
  t$variable <- gsub(songs[i], "", t$variable)
}

if(t$variable == "-1_1", t$value = "power")

#t$variable <- gsub(songs[1], "", t$variable)


```

